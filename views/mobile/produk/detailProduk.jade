extends ../layout
append content
    .row
        .col-sm-1
        .col-sm-3
            //.modal.fade
            .modal.fade.modal-beli(tabindex='-1', role='dialog', aria-labelledby='myLargeModalLabel', aria-hidden='true')
                .modal-dialog.modal-sm
                    .modal-content
                        .modal-header
                            h4 Beli
                        .modal-body(style='padding: 40px')
                            form(method='post',action='/keranjang/tambah')
                                .row
                                    form pembelian
                                    table(width=530)
                                        tr
                                          td <b style='font-size : 8pt'> Nama Produk </b><br> #{toko.Produk[0].nama}
                                              | <input type="hidden" name="idProduk" value="#{toko.Produk[0].id}">
                                          td &nbsp;
                                          td Keterangan (Opsional)
                                              textarea(rows=3 width=300)
                                        tr
                                          script(type='text/javascript').

                                          td(style='padding: 0 10px 0px 0px') Jumlah Barang
                                            | <input id='jumlah' type='number' onkeyup="hitung()" name='jumlah'>
                                          td(width=150) Harga Barang <br> Rp <span id='harga'></span>
                                          td(width=150) Total Harga Barang <br> Rp <span id='total'></span>
                                              script(type='text/javascript').
                                                  function numberFormat(_number, _sep) {
                                                      _number = typeof _number != "undefined" && _number > 0 ? _number : "";
                                                      _number = _number.replace(new RegExp("^(\\d{" + (_number.length % 3 ? _number.length % 3 : 0) + "})(\\d{3})", "g"), "$1 $2").replace(/(\d{3})+?/gi, "$1 ").trim();
                                                      if (typeof _sep != "undefined" && _sep != " ") {
                                                          _number = _number.replace(/\s/g, _sep);
                                                      }
                                                      return _number;
                                                  }
                                                  function hitung() {
                                                      var total = document.getElementById('total');
                                                      var jumlah = document.getElementById('jumlah');
                                                      var hasil_kali = #{toko.Produk[0].harga} * jumlah.value;
                                                      total.innerHTML = numberFormat(hasil_kali+"",".");
                                                  }
                                                  var harga = document.getElementById('harga');
                                                  harga.innerHTML = numberFormat("#{toko.Produk[0].harga}", ".");
                                        //batas form pembelian
                                hr
                                .row
                                    script(type='text/javascript').
                                        $(document).ready(function () {
                                            $("#provinsi").change(function () {
                                                $.ajax({
                                                    type: 'GET',
                                                    url: '/getkabupaten/' + $('#provinsi option:selected').val(),
                                                    success: function (result) {
                                                        $('#kabupaten').empty();
                                                        $('#kecamatan').empty();
                                                        $('#kabupaten').append(result.listArr)
                                                    }
                                                })
                                            });
                                            $("#kabupaten").change(function () {
                                                $.ajax({
                                                    type: 'GET',
                                                    url: '/getkecamatan/' + $('#kabupaten option:selected').val(),
                                                    success: function (result) {
                                                        $('#kecamatan').empty();
                                                        $('#kecamatan').append(result.listArr)
                                                    }
                                                })
                                            });
                                        });
                                    table
                                        tr
                                            td(colspan='3' height=70) Simpan Alamat Sebagai <br/> <input name='' type='text'> *contoh : alamat rumah,alamat teman...
                                        tr
                                            td(height=30) Nama Penerima <br/> <input name='' type='text'>
                                            td No. Hp Penerima <br/> <input name='' type='text'>
                                            td Kode Pos <br/> <input name='' type='text'>
                                        tr
                                            td(height=70) <b> Provinsi </b>
                                                select#provinsi(required=true,style='font-size:8pt')
                                                    option pilih provinsi
                                                    each val in provinsi
                                                        option(value='#{val.id}') #{val.nama}
                                            td <b> Kotamadya/Kabupaten </b>
                                                select#kabupaten(required=true,style='font-size:8pt')
                                                    option(disabled) pilih kabupaten/kota
                                            td <b> Kecamatan </b><br>
                                                select#kecamatan(required=true,style='font-size:8pt')
                                                    option(disabled) pilih kecamatan
                                center: input.btn.btn-primary(type='submit' value='Beli Produk Ini')

        .col-sm-4
            p <a href='/daftarproduk/#{toko.Produk[0].KategoriProdukId}'> #{toko.Produk[0].Kategori_Produk.kategori} </a> > <a href='#'> #{toko.Produk[0].nama}</a>
            table
              tr
                td <img src='/images/produk/#{toko.Produk[0].gambar}' width='250'>
              tr
                td: h1=toko.Produk[0].nama
                  | <h2> Rp <span id='uang'> </span></h2>
                  p: a.btn.btn-primary(data-toggle='modal', data-target='.modal-beli'): i.fa.fa-shopping-cart  Beli
                  //dirubah kembali kalau cart nya udah beres
                  //if(session.nama)
                  //    p: a.btn.btn-primary(data-toggle='modal', data-target='.modal-beli'): i.fa.fa-shopping-cart  Beli
                  //else
                  //    p
                  //        a.btn.btn-primary(disabled=true): i.fa.fa-shopping-cart  Beli
                  //        &nbsp
                  //        a.btn.btn-primary(href='#') Daftar Terlebih Dahulu
                  | <a href='/produk/jadikanwishlist/#{toko.Produk[0].id}' class='btn btn-primary'>Tambahkan ke wishlist</a> <br/><br/>
                  | <p>Terjual : ambil dari data penjualan </p>
                  | <p>Berat : #{toko.Produk[0].berat} gr </p>
                  if (toko.Produk[0].kondisi == 1)
                      | <p>Kondisi : Baru </p>
                  else
                      | <p>Kondisi : Bekas </p>
                script.
                  document.getElementById("uang").innerHTML = numberFormat("#{toko.Produk[0].harga}",".");
        .col-sm-3(style='margin : 0 30px')
             h3 Informasi toko
             table
                tr: td(rowspan='4',width='110px')
                    a(href='/toko/#{toko.nama}'): img(src='/images/#{toko.logo}', width='100px')
                tr: td: a(href='#') #{toko.nama}
                tr: td #{toko.Kabupaten.nama}
                tr: td: a.btn-primary.btn(href='/toko/favorit/#{toko.id}') Jadikan Favorit

    br
    .row
        .col-sm-1
        .category-tab
              // category-tab
              .col-sm-8
                  ul.nav.nav-tabs
                      li: a(href='#deskripsi' data-toggle='tab') Deskripsi Produk
                      li: a(href='#review' data-toggle='tab') Review
                      li: a(href='#diskusi' data-toggle='tab') Diskusi Produk
                  .tab-content
                      #deskripsi.tab-pane.fade.active.in
                          div
                              p #{toko.Produk[0].deskripsi}
                      #review.tab-pane.fade
                          .col-sm-3
                              p review produk
                      #diskusi.tab-pane.fade
                          .col-sm-3
                              p diskusi produk
    br
    br